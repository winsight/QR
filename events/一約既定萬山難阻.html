<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="../resource/img/Icon.jpg" type="image/x-icon" />
	<link rel="stylesheet" href="../resource/css/reset.css"> <!-- CSS reset -->
	<link rel="stylesheet" href="../resource/css/style.css"> <!-- Resource style -->
	<script src="../resource/js/jquery-1.8.0.min.js"></script>
	<script type="text/javascript">
		function run() { document.getElementById("sp").click(); }
	</script>
	<script type="text/javascript">
		$(function () {
			$(".pic").click(function () {
				var _this = $(this);//将当前的pimg元素作为_this传入函数 
				imgShow("#outerdiv", "#innerdiv", "#bigimg", _this);
			});
		});
		function imgShow(outerdiv, innerdiv, bigimg, _this) {
			var src = _this.attr("src");//获取当前点击的pimg元素中的src属性 
			$(bigimg).attr("src", src);//设置#bigimg元素的src属性 
			/*获取当前点击图片的真实大小，并显示弹出层及大图*/
			$("<img/>").attr("src", src).load(function () {
				var windowW = $(window).width();//获取当前窗口宽度 
				var windowH = $(window).height();//获取当前窗口高度 
				var realWidth = this.width;//获取图片真实宽度 
				var realHeight = this.height;//获取图片真实高度 
				var imgWidth, imgHeight;
				var scale = 0.8;//缩放尺寸，当图片真实宽度和高度大于窗口宽度和高度时进行缩放 
				if (realHeight > windowH * scale) {//判断图片高度 
					imgHeight = windowH * scale;//如大于窗口高度，图片高度进行缩放 
					imgWidth = imgHeight / realHeight * realWidth;//等比例缩放宽度 
					if (imgWidth > windowW * scale) {//如宽度扔大于窗口宽度 
						imgWidth = windowW * scale;//再对宽度进行缩放 
					}
				} else if (realWidth > windowW * scale) {//如图片高度合适，判断图片宽度 
					imgWidth = windowW * scale;//如大于窗口宽度，图片宽度进行缩放 
					imgHeight = imgWidth / realWidth * realHeight;//等比例缩放高度 
				} else {//如果图片真实高度和宽度都符合要求，高宽不变 
					imgWidth = realWidth;
					imgHeight = realHeight;
				}
				$(bigimg).css("width", imgWidth);//以最终的宽度对图片缩放 
				var w = (windowW - imgWidth) / 2;//计算图片与窗口左边距 
				var h = (windowH - imgHeight) / 2;//计算图片与窗口上边距 
				$(innerdiv).css({ "top": h, "left": w });//设置#innerdiv的top和left属性 
				$(outerdiv).fadeIn("fast");//淡入显示#outerdiv及.pimg 
			});
			$(outerdiv).click(function () {//再次点击淡出消失弹出层 
				$(this).fadeOut("fast");
			});
		}

	</script>

	<title>一約既定萬山難阻</title>
</head>

<body onload="run()">
	<main class="cd-main-content">
		<div class="center">
			<a href="#0" class="cd-btn cd-modal-trigger"><span id="sp">Loading···</span></a><br><br><br>
		</div>
	</main> <!-- .cd-main-content -->

	<div class="cd-modal">
		<div class="modal-content">
			<h1>一約既定萬山難阻</h1>
			<p align="center"> <strong></strong></p>

			<p align="center">

				<br>
				我等你
				<br>
				<br>
				
				<br>
				<br>

				<div id="outerdiv"
					style="position:fixed;top:0;left:0;background:rgba(0,0,0,0.7);z-index:2;width:100%;height:100%;display:none;">
					<div id="innerdiv" style="position:absolute;">
						<img id="bigimg" style="border:5px solid #fff;" src="" />
					</div>
				</div>
			</p>

			<p>

			</p>
		</div> <!-- .modal-content -->

		<a href="#0" class="modal-close">Close</a>
	</div> <!-- .cd-modal -->


	<div class="cd-transition-layer">
		<div class="bg-layer"></div>
	</div> <!-- .cd-transition-layer -->

	<script src="../resource/js/jquery-2.1.4.js"></script>
	<script src="../resource/js/main.js"></script> <!-- Resource jQuery -->


</body>

</html>